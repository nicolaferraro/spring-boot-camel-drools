<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        http://camel.apache.org/schema/spring       http://camel.apache.org/schema/spring/camel-spring.xsd">
    <camelContext id="camel" xmlns="http://camel.apache.org/schema/spring">

        <route id="test-route" trace="false">
            <description>Example route that will regularly create a Person and send it to the Kie Server to get a greeting</description>
            <!-- Using the route defined below to send commands to the kie server and get the responses -->
            <from id="route-timer" uri="timer:testRoute?period=3s"/>

            <!-- Setting headers for Camel kie-->
            <setHeader headerName="CamelKieClient"><constant>rule</constant></setHeader>
            <setHeader headerName="CamelKieOperation"><constant>executeCommandsWithResults</constant></setHeader>
            <setHeader headerName="CamelKieId"><constant>decisionserver-hellorules</constant></setHeader>
            <setHeader headerName="CamelKieCmd"><method bean="decisionServerHelper" method="createRandomCommand"/></setHeader>

            <to uri="kie:http://{{service:{{kieserver.service}}:{{kieserver.devel-service}}}}/kie-server/services/rest/server"/>
            <bean id="route-extract-result" method="extractResult" ref="decisionServerHelper"/>
            <log id="route-log-result" message="${body.salutation}"/>
        </route>


    </camelContext>
</beans>
